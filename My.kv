WindowManager:
    Accueil:
    User:
    MyGrid:
    Secondwindow:
    ThirdWindow:
    Profil:
    Paswdmodif:
<Accueil>:
    name:"Accueil"
    id:main_win
    orientation : "vertical"
    spacing : 10
    space_x :self.size[0]/3
    BoxLayout:
        orientation: "vertical"
        size_hint_y : None
        height : 170
        canvas.before:
            BorderImage:
                source:'book.png'
                size:root.width ,root.height
        BoxLayout:
            orientation: "horizontal"
            spacing: 500
            size_hint_y:None
            height: 150
            Image:
                source:'Logo1.png'
                #height: dp(100)
            Image:
                source:'logo-universite-sultan-moulay-slimane-beni-mellal-usms.png'
                #height: dp(500)
                #space_x :self.size[1]/3
    BoxLayout :
        orientation : "vertical"
        padding :main_win.space_x , 200
        #spacing : 20
        BoxLayout :
            orientation : 'vertical'
            spacing: 10
            size_hint_y : None
            height : 80
            TextInput :
                id:first
                hint_text : 'Username'
                multiline : False
                focus : True
                on_text_validate: pwd_field.focus = True
            TextInput :
                id: second
                hint_text : 'Password'
                multiline : False
                password: True
        Label:
            id: sp
            size_hint_y: None
            height : 40
        Button :
            text : "SIGN_IN"
            size_hint_y :None
            height : 40
            background_color: (.50, .2, .73, 1)
            background_normal: ''
            on_release:
                a=root.signin()
                if a == 1 : app.root.current='User'
                elif a ==2 or a == 0 : app.root.current='MyGrid'
        Label:
            id: sp2
<User>:
    name:"User"
    spacing:10
    space_x:self.size[0]/3
    canvas.before:
        Color:
            rgba:(240/255,240/255,240/255,240/255)
        Rectangle:
            pos:self.pos
            size:self.size
     #   BorderImage:
      #      source:'book-in-library-with-open-textbook1.jpg'
       #     pos:self.pos
        #    size:root.width ,root.height
    BoxLayout:
        orientation:'vertical'
        BoxLayout:
            size_hint_y:.3
            BoxLayout:
                padding:20
                spacing:20
                size_hint:.15,.7
                #pos_hint_x:.3
                pos_hint:{"top":.8,"center_x":.8}
                BoxLayout:
                    Button:
                        id:profile
                        background_color:1,1,1,0
                        on_release:
                            app.root.current="Profil"
                            root.manager.transition.direction = "down"
                        Image:
                            source:'profil.png'
                            center_x:self.parent.center_x
                            center_y:self.parent.center_y-10
            BoxLayout:
                orientation:"vertical"
                padding:20
                spacing:20
                BoxLayout:
                    BoxLayout:
                        Label:
                            text:""
                            color:0,0,0,0
                        RoundedButton:
                            id:deco
                            text:"Déconnecté"
                            #color:(0,1,1,1)
                            font_size:15
                            size_hint_y:.8
                            size_hint_x:.17
                            pos_hint:{"x":.5}
                            on_release:app.root.current="Accueil"
                BoxLayout:
                    size_hint_x:.6
                    pos_hint:{"x":.4}
                    TextInput:
                        id:book_name
                        hint_text:"books"
                        font_size:25
                        focus : True
                        multiline:False
                        pos_hint:{"x":.3}
                        on_text_validate:chercher.focus=True
                    RoundedButton:
                        id:chercher
                        size_hint_x:.4
                        text:"chercher"
                        color:(1,1,1,1)
                        on_release:
                            root.recherche()
        BoxLayout:
            spacing:10
            padding:20
            BoxLayout:
                padding:20
                spacing:10
                size_hint_y:.7
                size_hint_x:.4
                orientation:'vertical'
                pos_hint:{"y":.2}
                ToggleButton:
                    text:"Informatique"
                    id:info
                    name:"info"
                    size_hint_y:.09
                    font_size:20
                    border_radius:[20,20,20,20]
                    group:'list'
                    on_state:root.test(self)
                ToggleButton:
                    text:"Mathématique"
                    id:mathematique
                    size_hint_y:.09
                    font_size:20
                    group:'list'
                    on_state:root.test(self)
                ToggleButton:
                    text:"Physique, Chimie"
                    id:pc
                    size_hint_y:.09
                    font_size:20
                    group:'list'
                    on_state:
                        root.test(self)
                        #root.pc_button()
                ToggleButton:
                    text:"Biologie, Géologie"
                    id:bio
                    size_hint_y:.09
                    font_size:20
                    group:'list'
                    on_state:root.test(self)
                ToggleButton:
                    text:"Autre"
                    id:autre
                    size_hint_y:.09
                    font_size:20
                    group:'list'
                    on_state:root.test(self)
                    #on_release:app.root.current="MyGrid"
            BoxLayout:
                id:aff
                cols:1
                ScreenManager:
                    id:scr_mng
                    Screen:
                    Screen:
                        id:scr_info
                        name:"scr_info"
                        RecycleView:
                            viewclass: 'CustomLabel'
                            id: table_floor_info
                            spacing:10
                            padding:20
                            RecycleGridLayout:
                                id: table_floor_layout_info
                                cols: 5
                                default_size: (None,250)
                                default_size_hint: (1,None)
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 5
                    Screen:
                        id:scr_math
                        name:"scr_math"
                        RecycleView:
                            viewclass: 'CustomLabel'
                            id: table_floor_math
                            spacing:10
                            padding:20
                            RecycleGridLayout:
                                id: table_floor_layout_math
                                cols: 5
                                default_size: (None,250)
                                default_size_hint: (1,None)
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 5
                    Screen:
                        id:scr_phy
                        name:"scr_phy"
                        RecycleView:
                            viewclass: 'CustomLabel'
                            id: table_floor_pc
                            spacing:10
                            padding:20
                            RecycleGridLayout:
                                id: table_floor_layout_pc
                                cols: 5
                                default_size: (None,250)
                                default_size_hint: (1,None)
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 5
                    Screen:
                        id:scr_bio
                        name:"scr_bio"
                        RecycleView:
                            viewclass: 'CustomLabel'
                            id: table_floor_bio
                            spacing:10
                            padding:20
                            RecycleGridLayout:
                                id: table_floor_layout_bio
                                cols: 5
                                default_size: (None,250)
                                default_size_hint: (1,None)
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 5
                    Screen:
                        id:scr_autre
                        name:"scr_autre"
                        RecycleView:
                            viewclass: 'CustomLabel'
                            id: table_floor_autre
                            spacing:10
                            padding:20
                            RecycleGridLayout:
                                id: table_floor_layout_autre
                                cols: 5
                                default_size: (None,250)
                                default_size_hint: (1,None)
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 5
                    Screen:
                        id:scr
                        name:"scr"
                        RecycleView:
                            viewclass: 'CustomLabel'
                            id: table_floor
                            spacing:10
                            padding:20
                            RecycleGridLayout:
                                id: table_floor_layout
                                cols: 5
                                default_size: (None,250)
                                default_size_hint: (1,None)
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 5
                    Screen:
                        id:scr_rech
                        name:"scr_rech"
                        RecycleView:
                            viewclass: 'CustomLabel'
                            id: table_floor_rech
                            spacing:10
                            padding:20
                            RecycleGridLayout:
                                id: table_floor_layout_rech
                                cols: 5
                                default_size: (None,250)
                                default_size_hint: (1,None)
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 5







<Profil>:
    name:"Profil"
    BoxLayout:
        spacing:20
        padding:20
        BoxLayout:
            id:profile
            size_hint_x:.4
            pos_hint:{"y":.2}
            Image:
                source:'profil.png'
                center_x:self.parent.center_x
                center_y:self.parent.center_y-10
        BoxLayout:
            orientation:"vertical"
            spacing:20
            padding:20
            BoxLayout:
                size_hint:.2,.8
                pos_hint:{"x":.7,"y":.1}
                Button:
                    text:"Back"
                    on_release:
                        app.root.current="User"
                        root.manager.transition.direction = "up"
            BoxLayout:
            BoxLayout:
                #pos_hint:{'x':0}
                size_hint_x:.3
                Label:
                    id :name_profil
                    text:'nome prenom'
                    color:0,0,0,1
            BoxLayout:
            BoxLayout:
                Button:
                    text:'change mode de passe'
                    size_hint_x:.2
                    on_release:
                        app.root.current='Paswdmodif'
                        root.manager.transition.direction = "down"
            BoxLayout:

<Paswdmodif>:
    name:"Paswdmodif"
    BoxLayout:
        spacing:20
        padding:20
        BoxLayout:
            id:profile
            size_hint_x:.4
            pos_hint:{"y":.2}
            Image:
                source:'profil.png'
                center_x:self.parent.center_x
                center_y:self.parent.center_y-10
        BoxLayout:
            orientation:"vertical"
            spacing:20
            padding:20
            BoxLayout:
                size_hint:.2,.5
                pos_hint:{"x":.7,"y":.1}
                Button:
                    text:"Back"
                    on_release:
                        app.root.current="Profil"
                        root.manager.transition.direction = "up"
            BoxLayout:
            BoxLayout:
                pos_hint:{'x':0.18}
                size_hint:.5,.3
                TextInput:
                    hint_text:'Last password'
                    color:0,0,0,1
            BoxLayout:
                size_hint:.5,.3
                pos_hint:{'x':0.18}
                TextInput:
                    hint_text:'new password'
                    color:0,0,0,1
            BoxLayout:
                size_hint:.5,.3
                pos_hint:{'x':0.18}
                Button:
                    text:'save'
                    size_hint_x:.2
                    #on_release:app.root.current='Paswdmodif'
            BoxLayout:



<MyGrid>:
    name: "MyGrid"
    BoxLayout:
        orientation: 'horizontal'
        spacing: 40
        padding:40
        pos_hint:{"x":.8}
        pos_hint:{"y":.4}
        size_hint:(0.9 , 0.2)

        Button:
            text:"Livres"
            background_color: 223/255, 35/255, 45/255, 1
            on_release:
                app.root.current = "livre"
                root.manager.transition.direction = "left"
        Button:
            text:"Etudiant"
            background_color: 223/255, 35/255, 45/255, 1
            on_release:
                app.root.current = "user"
                root.manager.transition.direction = "left"
        Button:
            text:"Adhérent"
            background_color:223/255, 35/255, 45/255, 1
        Button:
            text:"Profile"
            background_color: 223/255, 35/255, 45/255, 1

        Button:
            text:"Deconexion"
            background_color: 223/255, 35/255, 45/255, 1
            on_release:
                app.root.current = "Accueil"
                root.manager.transition.direction = "right"


<Secondwindow>:
    name: "livre"
    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                size: self.size
                pos: self.pos
        BoxLayout:
            pos_hint: {'top': 0.8}
            size_hint_x:.3
            orientation: "vertical"
            #size: root.width, root.height
            spacing: 15
            padding: 20
            Button:
                text:"Ajouter un livre"
                size_hint: (0.7 , 0.2)
                background_color: 223/255, 35/255, 45/255, 1
            Button:
                text:"Modifier un livre"
                size_hint: (0.7, 0.2)
                background_color: 223/255, 35/255, 45/255, 1
            Button:
                text:"Supprimer un livre"
                size_hint: (0.7 , 0.2)
                background_color: 223/255, 35/255, 45/255, 1
            Button:
                text:"Retour"
                size_hint: (0.7 , 0.2)
                background_color: 223/255, 35/255, 45/255, 1
                on_release:
                    app.root.current = "MyGrid"
                    root.manager.transition.direction = "right"
            Label:
                id:nom
        BoxLayout:
            orientation: "vertical"
            size_hint_x:.8
            size_hint_y:.3
            pos_hint:{"y":.7}
            spacing: 10
            padding: 30
            canvas.before:
                Color:
                    rgba:0, 0,0, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
            BoxLayout:
                orientation: "vertical"
                spacing:10
                BoxLayout:
                    Button:
                        text:"Informatique"
                        #size_hint: (0.5, 0.1)
                        background_color: 223/255, 35/255, 45/255, 1
                    Button:
                        text:"Math"
                        #size_hint: (0.4 , 0.1)
                        background_color: 223/255, 35/255, 45/255, 1
                    Button:
                        text:"PC"
                        #size_hint: (0.4 , 0.1)
                        background_color: 223/255, 35/255, 45/255, 1
                    Button:
                        text:"Bio & Gio"
                        #size_hint: (0.4 , 0.1)
                        background_color:223/255, 35/255, 45/255, 1
                    Button:
                        text:"Autres"
                        #size_hint: (0.4 , 0.1)
                        background_color: 223/255, 35/255, 45/255, 1


<ThirdWindow>
    name: "user"
    BoxLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                size: self.size
                pos: self.pos
        BoxLayout:
            pos_hint: {'top': 0.8}
            size_hint_x:.3
            orientation: "vertical"
            #size: root.width, root.height
            spacing: 15
            padding: 20
            Button:
                text:"Ajouter un Adhérent"
                size_hint: (0.3 , 0.2)
                background_color: 223/255, 35/255, 45/255, 1
            Button:
                text:"Modifier un Adhérent"
                size_hint: (0.3, 0.2)
                background_color: 223/255, 35/255, 45/255, 1
            Button:
                text:"Supprimer un Adhérent"
                size_hint: (0.3 , 0.2)
                background_color: 223/255, 35/255, 45/255, 1
            Button:
                text:"Retour"
                size_hint: (0.3 , 0.2)
                background_color: 223/255, 35/255, 45/255, 1
                on_release:
                    app.root.current = "MyGrid"
                    root.manager.transition.direction = "right"
            Label:
                id:nom

<RoundedButton@Button>:
    background_color:(0,0,0,0)
    background_normal:''
    back_color:(.6,.3,.9,.2)
    border_radius:[20]
    canvas.before:
        Color:
            rgba:(111/255, 198/255, 219/255,1)
        RoundedRectangle:
            size:root.size
            pos:root.pos
            radius:[2,20,20,2]
<RoundedToggelButton@ToggleButton>:
    background_color:(0,0,0,0)
    background_normal:''
    back_color:(.6,.3,.9,.2)
    border_radius:[20]
    canvas.before:
        Color:
            rgba:(111/255, 198/255, 219/255,1)
        RoundedRectangle:
            size:root.size
            pos:root.pos
            radius:[2,20,20,2]
<RoundedTextInput@TextInput>
    background_color:(0,0,0,0)
    background_normal:''
    #back_color:(0,1,1,0)
    border_radius:[20,2,2,20]
    color:(1,1,1,1)
    canvas.before:
        Color:
            rgba:(1,1,1,1)
        RoundedRectangle:
            size:self.size
            pos:self.pos
            radius:self.border_radius
<CustomLabel@Label>:
    bcolor: (1,1,1,1)
    canvas.before:
        Color:
            rgba: root.bcolor
        Rectangle:
            size: self.size
            pos: self.pos